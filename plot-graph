#!/bin/sh

# File ID: ccf32478-1c7d-11e4-af72-000df06acc56

test "$1" = "--bezier" && { use_bezier=1; shift; } || unset use_bezier
file="$1"

graph() {
    local lt=$1
    local title=$2
    printf '"%s" using 1:%u title "%s" ' "$file" $(($lt + 1)) "$title"
    test -n "$use_bezier" && echo w l s b lt $lt || echo w lp pt 7 lt $lt
}

cat <<END | gnuplot -persist
set xdata time
set grid
set timefmt "%Y-%m-%dT%H:%M:%SZ"
set format x "%Y-%m-%d %H:%M:%S"
set yrange [0.1:]
plot \
$(graph 1 Bazaar), \
$(graph 2 CVS), \
$(graph 3 Git), \
$(graph 4 Mercurial), \
$(graph 5 Subversion)
END
